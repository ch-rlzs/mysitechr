# Save the updated chat HTML file with admin system implemented

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chrlzs Chat</title>
  <style>
    body {
      font-family: monospace;
      background: #0f0f0f;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    #chat {
      width: 90%;
      max-width: 600px;
      height: 400px;
      background: #1c1c1c;
      border: 1px solid #333;
      padding: 10px;
      overflow-y: scroll;
      margin-bottom: 10px;
    }
    .message {
      margin: 5px 0;
      padding: 5px;
      background: #2a2a2a;
      border-radius: 4px;
    }
    .own-message {
      background: #1e1e3f;
    }
    .delete-btn {
      float: right;
      color: red;
      cursor: pointer;
      margin-left: 10px;
    }
    .admin-tools {
      margin-left: 10px;
      color: orange;
      cursor: pointer;
    }
    input, button {
      margin: 5px;
    }
  </style>
</head>
<body>

<h2>Chrlzs Chat</h2>
<div id="chat"></div>

<input type="text" id="username" placeholder="Enter username">
<button onclick="setUsername()">Set Username</button>
<br>
<input type="text" id="message" placeholder="Enter message">
<button onclick="sendMessage()">Send</button>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAgFYlZc9PI95uSEC_iejXEZOerZ8ebO44",
    authDomain: "chrlzs-chat-645cf.firebaseapp.com",
    projectId: "chrlzs-chat-645cf",
    storageBucket: "chrlzs-chat-645cf.appspot.com",
    messagingSenderId: "426878855113",
    appId: "1:426878855113:web:166da584829cffd5106a18",
    databaseURL: "https://chrlzs-chat-645cf-default-rtdb.europe-west1.firebasedatabase.app/"
  };
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let username = localStorage.getItem("username") || "";
  let isAdmin = false;
  let kicked = false;

  const chat = document.getElementById("chat");

  db.ref("kickedUsers").on("value", (snapshot) => {
    const list = snapshot.val() || {};
    if (list[username]) {
      kicked = true;
      alert("You have been kicked from the chat.");
    }
  });

  db.ref("messages").on("child_added", (data) => {
    const msg = data.val();
    const el = document.createElement("div");
    el.className = "message" + (msg.user === username ? " own-message" : "");
    el.innerHTML = `<strong>${msg.user}</strong>: ${filterBadWords(msg.text)} <span style="font-size: 0.8em; color: #aaa;">(${msg.time})</span>`;

    if (msg.user === username || isAdmin) {
      const delBtn = document.createElement("span");
      delBtn.className = "delete-btn";
      delBtn.innerText = "x";
      delBtn.onclick = () => db.ref("messages/" + data.key).remove();
      el.appendChild(delBtn);
    }

    if (isAdmin && msg.user !== username) {
      const kickBtn = document.createElement("span");
      kickBtn.className = "admin-tools";
      kickBtn.innerText = "[kick]";
      kickBtn.onclick = () => db.ref("kickedUsers/" + msg.user).set(true);
      el.appendChild(kickBtn);
    }

    chat.appendChild(el);
    chat.scrollTop = chat.scrollHeight;
  });

  db.ref("messages").on("child_removed", (data) => {
    chat.innerHTML = "";
  });

  function setUsername() {
    const input = document.getElementById("username").value.trim();
    if (!input) return alert("Username required.");
    if (input === "chrlzs2") {
      const pass = prompt("Enter admin password:");
      if (pass === "roFmyt-murpe8-guvpuc") {
        isAdmin = true;
        alert("Admin access granted.");
      } else {
        return alert("Incorrect password.");
      }
    }
    username = input;
    localStorage.setItem("username", username);
    alert("Username set to " + username);
  }

  function sendMessage() {
    const text = document.getElementById("message").value.trim();
    if (!username) return alert("Set username first.");
    if (kicked) return alert("You are kicked and cannot send messages.");
    if (!text) return;

    db.ref("messages").push({
      user: username,
      text: text,
      time: new Date().toLocaleTimeString()
    });
    document.getElementById("message").value = "";
  }

  function filterBadWords(text) {
    const badWords = ["fuck", "shit", "bitch", "cunt", "asshole", "dick"];
    for (const word of badWords) {
      const regex = new RegExp(word, "gi");
      text = text.replace(regex, word[0] + "*".repeat(word.length - 1));
    }
    return text;
  }
</script>

</body>
</html>